; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
;default_envs = tbeam
;default_envs = tbeam-s3-core
;default_envs = heltec-v1
;default_envs = heltec-v2_0
;default_envs = heltec-v2_1
;default_envs = tlora-v1
;default_envs = tlora_v1_3
default_envs = tlora-v2
;default_envs = tlora-v2-1-1_6

extra_configs =
  arch/*/*.ini
  variants/*/platformio.ini

[env]
;extra_scripts = bin/platformio-custom.py

build_flags = -Wno-missing-field-initializers
  -Wno-format
;  -Isrc -Isrc/mesh -Isrc/mesh/generated -Isrc/gps -Isrc/buzz -Wl,-Map,.pio/build/output.map
;  -DUSE_THREAD_NAMES
;  -DTINYGPS_OPTION_NO_CUSTOM_FIELDS
;  -DPB_ENABLE_MALLOC=1
  -DRADIOLIB_EXCLUDE_CC1101
  -DRADIOLIB_EXCLUDE_NRF24
  -DRADIOLIB_EXCLUDE_RF69
  -DRADIOLIB_EXCLUDE_SX1231
  -DRADIOLIB_EXCLUDE_SI443X
  -DRADIOLIB_EXCLUDE_RFM2X
  -DRADIOLIB_EXCLUDE_AFSK
  -DRADIOLIB_EXCLUDE_HELLSCHREIBER
  -DRADIOLIB_EXCLUDE_MORSE
  -DRADIOLIB_EXCLUDE_RTTY
  -DRADIOLIB_EXCLUDE_SSTV
  -DRADIOLIB_EXCLUDE_AX25
  -DRADIOLIB_EXCLUDE_DIRECT_RECEIVE
  -DRADIOLIB_EXCLUDE_BELL
  -DRADIOLIB_EXCLUDE_PAGER
  -DRADIOLIB_EXCLUDE_FSK4
  -DRADIOLIB_EXCLUDE_APRS

monitor_speed = 115200

lib_deps = 
	bblanchon/ArduinoJson @ 6.21.3
	lewisxhe/AXP202X_Library @ 1.1.3
	peterus/APRS-Decoder-Lib @ 0.0.6
	peterus/esp-logger @ 1.0.0
	peterus/ESP-FTP-Server-Lib @ 0.14.0
	knolleary/PubSubClient@^2.8
	mikalhart/TinyGPSPlus @ 1.0.3
	shaggydog/OneButton @ 1.5.0
	jgromes/RadioLib @ 6.1.0

check_tool = cppcheck
check_skip_packages = yes
check_flags =
  --suppressions-list=suppressions.txt
  --inline-suppr

;check_flags = cppcheck: --std=c++20 --suppress=*:*.pio\* --inline-suppr --suppress=unusedFunction --suppress=shadowFunction:*TimeLib.cpp --suppress=unreadVariable:*TimeLib.cpp --suppress=badBitmaskCheck:*project_configuration.cpp
;test_build_src = yes

[arduino_base]
framework = arduino
lib_deps =
  ${env.lib_deps}

build_flags = ${env.build_flags} -Os -DRADIOLIB_SPI_PARANOID=0
build_src_filter = ${env.build_src_filter} -<platform/portduino/>

;[env:lora_board]
;board = esp32doit-devkit-v1
;build_flags = -Werror -Wall -DUNITY_INCLUDE_PRINT_FORMATTED
;
;[env:lora_v3_board]
;board = heltec_wifi_lora_32_V3
;build_flags = -Werror -Wall -DUNITY_INCLUDE_PRINT_FORMATTED
;
;[env:lora_board_debug]
;board = esp32doit-devkit-v1
;build_flags = -Werror -Wall -DCORE_DEBUG_LEVEL=5 -DUNITY_INCLUDE_PRINT_FORMATTED
;build_type = debug
